store:
  provider: "tinydb"
  path: "news_docs.json"

feeds:
  - name: "SVT Nyheter"
    url: "https://www.svt.se/nyheter/rss.xml"

max_items_per_feed: 10
article_timeout_s: 20

batching:
  max_chars_per_batch: 8000
  max_articles_per_batch: 4
  article_clip_chars: 2000
  retry_user_clip_chars: 9000
  meta_batch_clip_chars: 1800
  meta_sources_clip_chars: 140

llm:
  provider: "ollama"
  model: "llama3.1"
  base_url: "http://localhost:11434"
  max_rps: 1
  timeout_s: 6000
  sock_read_timeout_s: 360
  max_retries: 3
  retry_backoff_s: 2.0

checkpointing:
  enabled: true
  dir: "~/.local/share/FeedSummary/checkpoints"


prompts:
  batch_system: |
    Du är en svensk nyhetsredaktör. Summera artiklarna i denna batch.
    Krav:
    - 3–7 bullets "Det viktigaste i batchen"
    - Kort tematisering (max 3 rubriker)
    - "Källor (batch)" som numrerad lista: titel + URL
    - Slå ihop duplicerade nyheter och notera om flera källor rapporterar samma sak.
  batch_user_template: |
    Batch {batch_index}/{batch_total}. Här är artiklarna:

    {articles_corpus}

  meta_system: |
    Du är en svensk nyhetsredaktör. Skapa en sammanfattning över ALLA batch-sammanfattningar.
    Krav:
    1) Börja med 5–10 punkter "Det viktigaste".
    2) Tematisera under rubriker.
    3) Avsluta med "Källor" som en numrerad lista över alla artiklar (titel + URL).
    4) Deduplicera: om samma nyhet finns i flera batcher, slå ihop.
    5) Var kort men informativ.
  meta_user_template: |
    Här är batch-sammanfattningarna:

    {batch_summaries}

    Här är den fullständiga källistan (använd denna för "Källor"):
    {sources_list}